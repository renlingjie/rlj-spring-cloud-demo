---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by renlingjie.
--- DateTime: 2022/1/14 9:04 上午
---

-- 模拟限流(-- 就是Lua的注释)
-- 1、定义一个key变量，接收Redis传来的key，不过这里是模拟，就假设接收的key是My key
local key = 'My key'
-- 2、指定限流的最大阈值为2
local limit = 2
-- 3、当前的流量大小(用于测试上面限流的最大阈值是否对此有限制)
local currentLimit = 0
-- 4、判断
-- 因为当请求过来就会进入这里，那么当前流量加上这个流量(+1)是否还在阈值之内？如果在就返回true表示接受，否则就false
if currentLimit + 1 > limit then
    print('reject')
    return false
else
    print('accept')
    return true
end

